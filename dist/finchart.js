!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(self,(function(){return(()=>{"use strict";var e={433:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ChartType=void 0,(i=t.ChartType||(t.ChartType={})).Line="line",i.Bar="bar",i.Area="area",i.Candlestick="candlestick"},810:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var n=i(708),o=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return o.label=e.label?e.label:void 0,o.icon=e.icon?e.icon:void 0,o.element.classList.add("button"),o.element.innerHTML="",o.icon&&(o.element.innerHTML+='<div class="icon">'+n.Icon.get(o.icon)+"</div>"),o.label&&(o.element.innerHTML+='<div class="label">'+o.label+"</div>"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i(851).ClickableControl);t.Button=o},851:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableControl=void 0;var n=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.element.addEventListener("click",(function(){e&&e(i)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i(919).Control);t.ClickableControl=n},919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Control=void 0,t.Control=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.createElement("div"),this.element.className="control"}},853:(e,t)=>{var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.OHLC=void 0;var n=function(){function e(t,i,n,o,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var l=new Date(t.replace(" ","T")),s=l.getTime()-72e5-6e4*l.getTimezoneOffset();this.datetime=new Date(s),this.open=i,this.high=n,this.low=o,this.close=r,this.volume=a||void 0}return i(e,[{key:"range",get:function(){return this.high-this.low}},{key:"barRange",get:function(){return this.close-this.open}},{key:"direction",get:function(){return this.barRange>0?"bull":this.barRange<0?"bear":"flat"}}]),e}();t.OHLC=n},708:(e,t)=>{var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"get",value:function(e){return this.icons[e]}}]),e}();t.Icon=n,n.icons={dropdown:'\n            <svg width="16" height="16" viewBox="0 0 20 20" fill="none">\n                <path d="M15.4211 7H4.57883C4.06575 7 3.80438 7.61956 4.17224 7.98743L9.5934 13.4086C9.81605 13.6312 10.1839 13.6312 10.4067 13.4086L15.8278 7.98743C16.1956 7.61956 15.9342 7 15.4211 7Z" fill="#888888"/>\n            </svg>\n        ',fullscreen:'\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M6 3V2H2.5C2.22384 2 2 2.22384 2 2.5V6H3V3.705L7.645 8.35L8.35 7.645L3.705 3H6Z" fill="#888888"/>\n                <path d="M17.5 2H14V3H16.295L11.65 7.645L12.355 8.35L17 3.705V6H18V2.5C18 2.22384 17.7762 2 17.5 2Z" fill="#888888"/>\n                <path d="M17 16.295L12.355 11.65L11.65 12.355L16.295 17H14V18H17.5C17.7762 18 18 17.7762 18 17.5V14H17V16.295Z" fill="#888888"/>\n                <path d="M7.645 11.645L3 16.295V14H2V17.5C2 17.7762 2.22384 18 2.5 18H6V17H3.705L8.35 12.355L7.645 11.645Z" fill="#888888"/>\n            </svg>\n        '}},961:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultChartOptions=void 0;var n=i(433),o=i(925);t.DefaultChartOptions={type:n.ChartType.Candlestick,timeframe:o.Timeframe.H1,displayFlag:!0}},163:(e,t)=>{var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PriceAxis=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.initStyle(),this.drawElement(),this.plotPriceLabels(),this.parent.options.displayFlag&&this.drawFlag()}return i(e,[{key:"initStyle",value:function(){this.parent.addStyle("\n            .finchart .price-axis {\n                position: absolute;\n                top: "+this.parent.style.toolbarHeight+"px;\n                right: 0;\n                width: "+this.parent.style.priceAxisWidth+"px;\n                height: "+(this.parent.style.timeAxisHeight+this.parent.viewportSize.height)+"px;\n                border-left: 2px solid "+this.parent.style.borderColor+";\n                background: "+this.parent.style.bgColor+"BB;\n                overflow: hidden;\n            }\n            .finchart .price-axis .price {\n                position: absolute;\n                left: 10px;\n                line-height: 20px;\n                margin-top: -10px;\n                color: "+this.parent.style.labelColor+";\n            }\n            .finchart .price-axis .price-flag {\n                position: absolute;\n                left: 0;\n                height: 30px;\n                margin-top: -15px;\n                padding: 5px 10px;\n                line-height: 20px;\n                z-index: 1000;\n                color: #FFF;\n                border-radius: 4px;\n            }\n        ")}},{key:"drawElement",value:function(){this.element=document.createElement("div"),this.element.className="price-axis",this.parent.element.appendChild(this.element)}},{key:"plotPriceLabels",value:function(){this.element.innerHTML="";for(var e=this.parent.bound.range/this.parent.maximumDataHeight,t=0;t<=this.parent.maximumDataHeight;t++){var i=document.createElement("div");i.className="price",i.innerText=(this.parent.bound.maxPrice-e*t).toString().padEnd(7,"0").slice(0,7),i.style.top=this.parent.viewportSize.height*this.parent.padding+t*this.parent.gridSize.height+"px",this.element.appendChild(i)}}},{key:"drawFlag",value:function(){var e=this.parent.data[0],t=this.parent.viewportSize.height*this.parent.padding+this.parent.pointSize.y*(this.parent.bound.maxPrice-e.close),i=this.parent.style[e.direction+"Color"],n=document.createElement("div");n.className="price-flag",n.innerText=e.close.toString().padEnd(7,"0").substr(0,7),n.style.background="linear-gradient(270deg, "+i+"AA, "+i+"EE)",n.style.top=t+"px",t<this.parent.viewportSize.height&&this.element.appendChild(n)}}]),e}();t.PriceAxis=n},868:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultChartStyle=void 0,t.DefaultChartStyle={bgColor:"#141420",labelColor:"#666677",gridColor:"#26262f",borderColor:"#343440",bullColor:"#00A562",bearColor:"#BF2121",flatColor:"yellow",toolbarHeight:35,priceAxisWidth:75,timeAxisHeight:55,font:"14px Helvetica, Arial, sans-serif"}},332:(e,t,i)=>{var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TimeAxis=void 0;var o=i(925),r=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.viewport=i,this.plotDateTimeLabels()}return n(e,[{key:"plotDateTimeLabels",value:function(){var e=this;this.element.innerHTML="";for(var t=0,i=function(i){var n=e.viewport.displayData[i],r=e.viewport.displayData[i-1],a="",l=n?e.viewport.displayData[i].datetime:new Date;if(e.viewport.options.timeframe===o.Timeframe.H1&&(a=l.getHours()+":00"),i%6==0){var s=document.createElement("div");s.className="time";var h=3*e.viewport.gridSize.width,d=(i*e.viewport.gridSize.width+e.viewport.style.priceAxisWidth*e.viewport.pixelRatio+e.viewport.padding*e.viewport.width-h-e.viewport.scrollPos.x)/e.viewport.pixelRatio;s.innerText=a,s.style.color=e.viewport.style.labelColor,s.style.position="absolute",s.style.top="10px",s.style.right=d+"px",s.style.textAlign="center",s.style.width=h+"px",d>=-1*e.viewport.style.priceAxisWidth&&e.element.appendChild(s)}!function(){if(0==i&&n){var o=document.createElement("div"),a=(e.viewport.gridSize.width,(e.viewport.style.priceAxisWidth*e.viewport.pixelRatio+e.viewport.padding*e.viewport.width+e.viewport.gridSize.width*i-e.viewport.scrollPos.x)/e.viewport.pixelRatio);o.className="period",o.id="period-"+n.datetime.getDate()+"-"+n.datetime.getMonth(),o.innerText=n.datetime.getDate().toString().padStart(2,"0")+"/"+(n.datetime.getMonth()+1).toString().padStart(2,"0"),o.style.height=e.viewport.style.timeAxisHeight+"px",o.style.position="absolute",o.style.top="0",o.style.right=a+"px",o.style.paddingTop="30px",o.style.boxSizing="border-box",o.style.borderLeft="1px solid "+e.viewport.style.gridColor,o.style.color=e.viewport.style.labelColor,o.style.textAlign="center",a<=e.viewport.width/e.viewport.pixelRatio&&e.element.appendChild(o)}else if(n&&r)if(r.datetime.getDate()!==n.datetime.getDate()){var l=document.createElement("div"),s=(e.viewport.gridSize.width,(e.viewport.style.priceAxisWidth*e.viewport.pixelRatio+e.viewport.padding*e.viewport.width+e.viewport.gridSize.width*i-e.viewport.scrollPos.x)/e.viewport.pixelRatio);l.className="period",l.id="period-"+n.datetime.getDate()+"-"+n.datetime.getMonth(),l.innerText=n.datetime.getDate().toString().padStart(2,"0")+"/"+(n.datetime.getMonth()+1).toString().padStart(2,"0"),l.style.height=e.viewport.style.timeAxisHeight+"px",l.style.position="absolute",l.style.top="0",l.style.right=s+"px",l.style.paddingTop="30px",l.style.boxSizing="border-box",l.style.borderLeft="1px solid "+e.viewport.style.gridColor,l.style.color=e.viewport.style.labelColor,l.style.textAlign="center",s<=e.viewport.width/e.viewport.pixelRatio&&e.element.appendChild(l),t=i}else{var h=e.element.querySelector("#period-"+n.datetime.getDate()+"-"+n.datetime.getMonth());h&&(h.style.width=e.viewport.gridSize.width*(i-t+1)/e.viewport.pixelRatio+"px")}}()},n=0;n<=this.viewport.dataCursor.max;n++)i(n)}}]),e}();t.TimeAxis=r},925:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Timeframe=void 0,(i=t.Timeframe||(t.Timeframe={})).M1="M1",i.M5="M5",i.M15="M15",i.M30="M30",i.H1="H1",i.H4="H4",i.D1="D1",i.W1="W1",i.MN="MN"},310:(e,t,i)=>{var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var o=i(810),r=i(708),a=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.initStyle(),this.createElement(),this.addLabel("symbol-name","USD/JPY"),this.addDropdown("timeframe","Timeframe",[{text:"M1"},{text:"M5"},{text:"M15"},{text:"M30"},{text:"H1"},{text:"H4"},{text:"D1"},{text:"W1"},{text:"MN"}],"H1"),this.addDropdown("chart-type","Candlestick",[{text:"Line"},{text:"Area"},{text:"Bar"},{text:"Candlestick"}]),this.addButton("fullscreen","Fullscreen",(function(e){document.fullscreenElement?document.exitFullscreen():i.parent.element.requestFullscreen()}),"right")}return n(e,[{key:"initStyle",value:function(){this.parent.addStyle("\n            .finchart .toolbar {\n                display: flex;\n                justify-content: space-between;\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: "+this.parent.style.toolbarHeight+"px;\n                border-bottom: 2px solid "+this.parent.style.borderColor+";\n                color: "+this.parent.style.labelColor+"\n            }\n            .finchart .toolbar > * {\n                display: flex;\n            }\n            .finchart .toolbar > .right {\n                flex-direction: row-reverse;\n            }\n            .finchart .toolbar > .left > * {\n                border-right: 1px solid "+this.parent.style.borderColor+";\n            }\n            .finchart .toolbar > .right > * {\n                border-left: 1px solid "+this.parent.style.borderColor+";\n            }\n            .finchart .toolbar > * > .label {\n                line-height: "+this.parent.style.toolbarHeight+"px;\n                padding: 0 10px;\n            }\n\n            .finchart .toolbar .dropdown {\n                position: relative;\n                display: flex;\n                align-items: center;\n                user-select: none;\n            }\n                .finchart .toolbar .dropdown:hover {\n                    background: "+this.parent.style.labelColor+"22;\n                }\n                .finchart .toolbar .dropdown:active {\n                    background: "+this.parent.style.labelColor+"11;\n                }\n                .finchart .toolbar .dropdown .dropdown-label {\n                    padding-left: 10px;\n                    line-height: "+this.parent.style.toolbarHeight+"px;\n                }\n                .finchart .toolbar .dropdown .icon {\n                    display: flex;\n                    align-items: center;\n                    padding: 0 5px 0 5px;\n                    width: auto;\n                    height: 100%;\n                }\n                .finchart .toolbar .dropdown .options {\n                    position: absolute;\n                    top: 100%;\n                    left: -1px;\n                    margin-top: 1px;\n                    padding: 10px 0;\n                    min-width: 140px;\n                    background: "+this.parent.style.bgColor+"EE;\n                    border: 1px solid "+this.parent.style.borderColor+";\n                    box-shadow: 0 4px 12px rgba(0,0,0,.17);\n                }\n                    .finchart .toolbar .dropdown .options.hidden {\n                        display: none;\n                    }\n                    .finchart .toolbar .dropdown .options .option {\n                        padding: 0 10px;\n                        line-height: 30px;\n                    }\n                    .finchart .toolbar .dropdown .options .option:hover {\n                        background: "+this.parent.style.labelColor+"22;\n                    }\n                    .finchart .toolbar .dropdown .options .option:active {\n                        background: "+this.parent.style.labelColor+"11;\n                    }\n                    .finchart .toolbar .dropdown .options .option.selected {\n                        font-weight: 600;\n                        background: "+this.parent.style.labelColor+"33;\n                    }\n            \n            .finchart .toolbar .button {\n                padding: 0 10px;\n                display: flex;\n                align-items: center;\n                line-height: "+this.parent.style.toolbarHeight+"px;\n                user-select: none;\n            }\n                .finchart .toolbar .button:hover {\n                    background: "+this.parent.style.labelColor+"22;\n                }\n                .finchart .toolbar .button:active {\n                    background: "+this.parent.style.labelColor+"11;\n                }\n                .finchart .toolbar .button .icon {\n                    width: auto;\n                    height: 100%;\n                    display: flex;\n                    align-items: center;\n                    padding-right: 5px;\n                }\n        ")}},{key:"createElement",value:function(){this.element=document.createElement("div"),this.element.className="toolbar",this.element.innerHTML='<div class="left"></div>',this.element.innerHTML+='<div class="right"></div>',this.parent.element.appendChild(this.element)}},{key:"addLabel",value:function(e,t,i){var n=document.createElement("div");n.className="label",n.id=e,n.innerText=t,this.element.querySelector("."+(i||"left")).appendChild(n)}},{key:"addDropdown",value:function(e,t,i,n,o,a){var l=void 0;n&&(l=i.find((function(e){return e.text===n||e.value===n})));var s=document.createElement("div");s.className="dropdown",s.id=e,s.innerHTML='\n            <div class="dropdown-label">'+(l?l.text:t)+"</div>",s.innerHTML+='<div class="icon">'+r.Icon.get("dropdown")+"</div>",s.innerHTML+='<div class="options hidden"></div>';var h=function(e){var t=document.createElement("div");t.className="option",t.innerHTML="<div>"+e.text+"</div>",(l&&l.value&&l.value===e.value||l&&l.text===e.text)&&t.classList.add("selected"),t.addEventListener("click",(function(){alert('Dropdown menu "'+e.text+'" is clicked.')})),s.querySelector(".options").appendChild(t)},d=!0,p=!1,c=void 0;try{for(var u,f=i[Symbol.iterator]();!(d=(u=f.next()).done);d=!0)h(u.value)}catch(e){p=!0,c=e}finally{try{!d&&f.return&&f.return()}finally{if(p)throw c}}this.element.querySelector("."+(a||"left")).appendChild(s),s.addEventListener("click",(function(){var e=s.querySelector(".options");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}))}},{key:"addButton",value:function(e,t,i,n){var r=new o.Button({icon:e,label:t},i);this.element.querySelector("."+(n||"left")).appendChild(r.element)}}]),e}();t.Toolbar=a},223:(e,t,i)=>{var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var r=i(433),a=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.padding=.05,this.scrollPos={x:0,y:0},this.scale={x:1,y:1},this.pointSize={x:9,y:9},this.data=i,this.options=n,this.style=o,this.pixelRatio=window.devicePixelRatio,1!==this.pixelRatio&&(this.pointSize={x:this.pointSize.x*this.pixelRatio,y:this.pointSize.y*this.pixelRatio},this.element.width=this.pixelRatio*this.element.width,this.element.height=this.pixelRatio*this.element.height),this.render()}return n(e,[{key:"render",value:function(){var e=this.element.getContext("2d");this.width=this.element.width,this.height=this.element.height,e.clearRect(0,0,this.width,this.height),this.maxDataHeight=10,this.gridSize={height:this.scale.y*this.innerHeight/this.maxDataHeight,width:this.scale.x*this.pointSize.x};var t,i=Math.ceil(this.scrollPos.x/this.gridSize.width);t=this.scrollPos.x>=this.padding*this.width?Math.floor((this.scrollPos.x-this.padding*this.width)/this.gridSize.width):0,this.maxDataLength=Math.ceil(this.innerWidth/this.gridSize.width),this.dataCursor={min:t,max:i+(this.maxDataLength-1)},this.dataCursor.max>this.data.length&&(this.dataCursor.max=this.data.length),this.displayData=this.data.slice(0,this.dataCursor.max);var n=void 0,a=void 0,l=void 0,s=void 0,h=this.data.slice(this.dataCursor.min,this.dataCursor.max);"number"==typeof this.displayData[0]?(n=Math.min.apply(Math,o(h)),a=Math.max.apply(Math,o(h)),this.bound={minPrice:n,maxPrice:a,range:a-n,timeRange:this.displayData.length}):(n=Math.floor(100*Math.min.apply(Math,o(h.map((function(e){return e.low})))))/100,a=Math.ceil(100*Math.max.apply(Math,o(h.map((function(e){return e.high})))))/100,l=new Date(Math.min.apply(Math,o(this.displayData.map((function(e){return e.datetime.getTime()}))))),s=new Date(Math.max.apply(Math,o(this.displayData.map((function(e){return e.datetime.getTime()}))))),this.bound={minPrice:n,maxPrice:a,minDateTime:l,maxDateTime:s,range:a-n,timeRange:s.getTime()-l.getTime()}),this.pointSize.y=this.innerHeight/this.bound.range,this.drawGrids(),this.options.type===r.ChartType.Candlestick&&this.plotCandlesticks(),this.drawFlag()}},{key:"drawGrids",value:function(){var e=this.element.getContext("2d");e.strokeStyle=this.style.gridColor;for(var t=0;t<=this.maxDataHeight;t++){var i=this.padding*this.height+this.gridSize.height*t;e.beginPath(),e.setLineDash([10,5]),e.moveTo(0,i),e.lineTo(this.width,i),e.stroke()}e.strokeStyle=this.style.gridColor;for(var n=0;n<=this.dataCursor.max;n+=6){var o=this.width*(1-this.padding)-this.gridSize.width*n;e.beginPath(),e.setLineDash([10,5]),e.moveTo(o+this.scrollPos.x,0),e.lineTo(o+this.scrollPos.x,this.height),e.stroke()}}},{key:"plotLine",value:function(){}},{key:"plotBars",value:function(){}},{key:"plotArea",value:function(){}},{key:"plotCandlesticks",value:function(){for(var e=this.element.getContext("2d"),t=0;t<=this.dataCursor.max;t++){var i=this.displayData[t];if(i){"bull"===i.direction?(e.strokeStyle=this.style.bullColor,e.fillStyle=this.style.bullColor):"bear"===i.direction?(e.strokeStyle=this.style.bearColor,e.fillStyle=this.style.bearColor):(e.strokeStyle=this.style.flatColor,e.fillStyle=this.style.flatColor);var n=this.width*(1-this.padding)-this.gridSize.width*t,o=this.height*this.padding+this.pointSize.y*(this.bound.maxPrice-i.high);e.beginPath(),e.setLineDash([]),e.moveTo(n+this.scrollPos.x,o),e.lineTo(n+this.scrollPos.x,o+this.pointSize.y*i.range),e.stroke();var r={x:n-.5*this.gridSize.width+Math.floor(this.gridSize.width/4)+1+this.scrollPos.x,y:0,width:this.gridSize.width-Math.floor(this.gridSize.width/2),height:this.pointSize.y*Math.abs(i.close-i.open)};"bear"===i.direction?r.y=o+this.pointSize.y*(i.high-i.open):"bull"===i.direction?r.y=o+this.pointSize.y*(i.high-i.close):(r.y=o+this.pointSize.y*(i.high-i.open),r.height=1),e.fillRect(r.x,r.y,r.width,r.height)}}}},{key:"drawFlag",value:function(){var e=this.data[0],t=this.element.getContext("2d"),i=this.height*this.padding+this.pointSize.y*(this.bound.maxPrice-e.close);"bull"===e.direction?(t.strokeStyle=this.style.bullColor,t.fillStyle=this.style.bullColor):"bear"===e.direction?(t.strokeStyle=this.style.bearColor,t.fillStyle=this.style.bearColor):(t.strokeStyle=this.style.flatColor,t.fillStyle=this.style.flatColor),t.beginPath(),t.setLineDash([10,5]),t.moveTo(0,i),t.lineTo(this.width,i),t.stroke(),t.setLineDash([])}},{key:"setScaleX",value:function(e){var t=this.scale.x+e;if(t<=2&&t>=.5){this.scale.x=t;var i=this.scrollPos.x/this.gridSize.width;this.scrollPos.x=i*this.gridSize.width}}},{key:"innerHeight",get:function(){return this.height-2*this.padding*this.height}},{key:"innerWidth",get:function(){return this.width*(1-this.padding)}}]),e}();t.Viewport=a}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}var n={};return(()=>{var e=n,t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Finchart=void 0;var o=i(853),r=i(961),a=i(163),l=i(868),s=i(332),h=i(310),d=i(223),p=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=this.options=void 0!==n?n:r.DefaultChartOptions,this.style=this.style=void 0!==o?o:l.DefaultChartStyle,this.initStyle(),this.data=this.prepareData(i),this.configureGUI(t),this.registerEvents()}return t(e,[{key:"initStyle",value:function(){document.querySelectorAll("head style.finchart").forEach((function(e){e.remove()})),this.styleSheet=document.createElement("style"),this.styleSheet.className="finchart",this.styleSheet.innerHTML="\n\t\t\t.finchart {}\n\t\t\t.finchart * {\n\t\t\t\tbox-sizing: border-box\n\t\t\t}\n\t\t",document.querySelector("head").appendChild(this.styleSheet)}},{key:"addStyle",value:function(e){this.styleSheet.innerHTML+=e}},{key:"prepareData",value:function(e){var t=[],i="number";try{if(isNaN(e[0])&&(i="ohlc"),"number"===i){var n=!0,r=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var h=l.value;if(isNaN(h))throw"Data type must be consistent (Array<number>)";t.push(h)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}}if("ohlc"===i){var d=!0,p=!1,c=void 0;try{for(var u,f=e[Symbol.iterator]();!(d=(u=f.next()).done);d=!0){var v=u.value;if(!isNaN(v))throw"Data type must be consistent (Array<OHLC>)";t.push(new o.OHLC(v[0],v[1],v[2],v[3],v[4],v[5]))}}catch(e){p=!0,c=e}finally{try{!d&&f.return&&f.return()}finally{if(p)throw c}}}}catch(e){console.error("Prepare Data Error: "+e)}finally{return t.reverse()}}},{key:"configureGUI",value:function(e){try{if(this.element=document.querySelector(e),null===this.element)throw"Cannot find "+e;this.element.className="finchart",this.element.style.position="relative",this.element.style.overflow="hidden",this.element.style.backgroundColor=this.style.bgColor,this.element.style.font=this.style.font,this.configureViewport(),this.configureTimeAxis(),this.configurePriceAxis(),this.configureToolbar()}catch(e){console.error("Initializing Error: "+e)}}},{key:"configureToolbar",value:function(){this.toolbar=new h.Toolbar(this)}},{key:"configureViewport",value:function(){var e=document.createElement("canvas");e.setAttribute("class","viewport"),e.style.position="absolute",e.style.top=this.style.toolbarHeight+"px",e.style.left="0",e.width=this.element.offsetWidth-this.style.priceAxisWidth,e.height=this.element.offsetHeight-this.style.toolbarHeight-this.style.timeAxisHeight,e.style.width=e.width+"px",e.style.height=e.height+"px",this.element.appendChild(e),this.viewport=new d.Viewport(e,this.data,this.options,this.style)}},{key:"configurePriceAxis",value:function(){this.priceAxis=new a.PriceAxis(this)}},{key:"configureTimeAxis",value:function(){var e=document.createElement("div");e.setAttribute("class","time-axis"),e.style.width="100%",e.style.height=this.style.timeAxisHeight+"px",e.style.position="absolute",e.style.bottom="0",e.style.left="0",e.style.borderTop="2px solid "+this.style.borderColor,e.style.overflow="hidden",e.style.cursor="ew-resize",e.style.userSelect="none",this.timeAxis=new s.TimeAxis(e,this.viewport),this.element.appendChild(this.timeAxis.element)}},{key:"renderElements",value:function(){this.viewport.element.width=this.viewport.pixelRatio*(this.element.offsetWidth-this.style.priceAxisWidth),this.viewport.element.height=this.viewport.pixelRatio*(this.element.offsetHeight-this.style.toolbarHeight-this.style.timeAxisHeight),this.viewport.element.style.width=this.element.offsetWidth-this.style.priceAxisWidth+"px",this.viewport.element.style.height=this.element.offsetHeight-this.style.toolbarHeight-this.style.timeAxisHeight+"px",this.viewport.render(),this.priceAxis.plotPriceLabels(),this.priceAxis.drawFlag(),this.timeAxis.plotDateTimeLabels()}},{key:"registerEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e.renderElements()})),this.viewport.element.addEventListener("wheel",(function(t){e.viewport.scrollPos.x-=e.viewport.pixelRatio*t.deltaX,e.renderElements(),e.viewport.scrollPos.x<0&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=0,e.renderElements()})),e.viewport.scrollPos.x>e.data.length*e.viewport.gridSize.width-e.viewport.width+100&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=e.data.length*e.viewport.gridSize.width-e.viewport.width+100,e.renderElements()}))}));var t=0,i=function(i){e.viewport.scrollPos.x-=e.viewport.pixelRatio*(t-i.clientX),t=i.clientX,e.renderElements(),e.viewport.scrollPos.x<0&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=0,e.renderElements()})),e.viewport.scrollPos.x>e.data.length*e.viewport.gridSize.width-e.viewport.width+100&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=e.data.length*e.viewport.gridSize.width-e.viewport.width+100,e.renderElements()}))};this.viewport.element.addEventListener("mousedown",(function(n){t=n.clientX,e.viewport.element.addEventListener("mousemove",i),e.viewport.element.addEventListener("mouseup",(function(t){e.viewport.element.removeEventListener("mousemove",i)}))}));var n=0,o=0,r=function(t){var i=n-t.touches[0].clientX;e.viewport.scrollPos.x-=e.viewport.pixelRatio*i,Math.round(i/(Date.now()-o)*10),n=t.touches[0].clientX,o=Date.now(),e.renderElements(),e.viewport.scrollPos.x<0&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=0,e.renderElements()})),e.viewport.scrollPos.x>e.data.length*e.viewport.gridSize.width-e.viewport.width+100&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=e.data.length*e.viewport.gridSize.width-e.viewport.width+100,e.renderElements()}))};this.viewport.element.addEventListener("touchstart",(function(t){n=t.touches[0].clientX,o=Date.now(),e.viewport.element.addEventListener("touchmove",r),e.viewport.element.addEventListener("touchend",(function(t){e.viewport.element.removeEventListener("touchmove",r),e.viewport.scrollPos.x<0&&window.requestAnimationFrame((function(){e.viewport.scrollPos.x=0,e.renderElements()}))}))})),this.timeAxis.element.addEventListener("mousedown",(function(t){var i=t.clientX,n=function(t){var n=(i-t.clientX)/1e3;e.viewport.setScaleX(n),e.renderElements(),i=t.clientX};e.timeAxis.element.addEventListener("mousemove",n),e.timeAxis.element.addEventListener("mouseup",(function(){e.timeAxis.element.removeEventListener("mousemove",n)}))}))}},{key:"devicePixelRatio",get:function(){return window.devicePixelRatio}},{key:"viewportSize",get:function(){return{width:this.viewport.width/this.devicePixelRatio,height:this.viewport.height/this.devicePixelRatio}}},{key:"bound",get:function(){return this.viewport.bound}},{key:"maximumDataHeight",get:function(){return this.viewport.maxDataHeight}},{key:"padding",get:function(){return this.viewport.padding}},{key:"gridSize",get:function(){return{width:this.viewport.gridSize.width/this.devicePixelRatio,height:this.viewport.gridSize.height/this.devicePixelRatio}}},{key:"pointSize",get:function(){return{x:this.viewport.pointSize.x/this.devicePixelRatio,y:this.viewport.pointSize.y/this.devicePixelRatio}}}]),e}();e.Finchart=p,p.count=0})(),n})()}));
//# sourceMappingURL=finchart.js.map